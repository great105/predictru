<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Telegram Bot Message Preview ‚Äî PredictRu</title>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: #0e1621;
    color: #e4e6eb;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }

  .header {
    background: #17212b;
    padding: 12px 20px;
    border-bottom: 1px solid #2b3945;
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .header h1 {
    font-size: 16px;
    font-weight: 600;
    color: #e4e6eb;
  }

  .header .badge {
    font-size: 11px;
    background: #2b5278;
    color: #6ab2f2;
    padding: 2px 8px;
    border-radius: 10px;
  }

  .container {
    display: flex;
    flex: 1;
    overflow: hidden;
  }

  .editor-panel {
    width: 50%;
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 12px;
    border-right: 1px solid #2b3945;
    overflow-y: auto;
  }

  .editor-panel label {
    font-size: 13px;
    color: #8b9bab;
    font-weight: 500;
  }

  .presets {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
  }

  .preset-btn {
    font-size: 12px;
    padding: 5px 10px;
    border: 1px solid #2b3945;
    border-radius: 8px;
    background: #17212b;
    color: #6ab2f2;
    cursor: pointer;
    transition: all 0.15s;
  }

  .preset-btn:hover { background: #1e2c3a; }
  .preset-btn.active { background: #2b5278; border-color: #6ab2f2; }

  textarea {
    flex: 1;
    min-height: 200px;
    background: #0e1621;
    color: #e4e6eb;
    border: 1px solid #2b3945;
    border-radius: 8px;
    padding: 12px;
    font-family: 'JetBrains Mono', 'Fira Code', monospace;
    font-size: 13px;
    line-height: 1.5;
    resize: none;
    outline: none;
  }

  textarea:focus { border-color: #6ab2f2; }

  .preview-panel {
    width: 50%;
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 12px;
    overflow-y: auto;
    background: #0e1621;
  }

  .chat-bg {
    flex: 1;
    background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40"><rect fill="%230e1621" width="40" height="40"/><circle fill="%23172130" cx="20" cy="20" r="1"/></svg>');
    border-radius: 12px;
    padding: 20px;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    gap: 8px;
  }

  .message-bubble {
    max-width: 85%;
    background: #182533;
    border-radius: 12px 12px 12px 4px;
    padding: 10px 14px;
    font-size: 14px;
    line-height: 1.55;
    color: #e4e6eb;
    word-wrap: break-word;
    white-space: pre-wrap;
  }

  .message-bubble b, .message-bubble strong { color: #fff; font-weight: 600; }
  .message-bubble i, .message-bubble em { color: #8b9bab; }
  .message-bubble code {
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    background: #0e1621;
    padding: 1px 5px;
    border-radius: 4px;
    color: #6ab2f2;
  }
  .message-bubble pre {
    background: #0e1621;
    padding: 8px 10px;
    border-radius: 6px;
    margin: 4px 0;
    overflow-x: auto;
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    color: #6ab2f2;
  }
  .message-bubble a { color: #6ab2f2; text-decoration: none; }

  .keyboard-row {
    display: flex;
    gap: 4px;
    max-width: 85%;
  }

  .kb-button {
    flex: 1;
    background: #2b5278;
    border: none;
    border-radius: 8px;
    padding: 8px 12px;
    color: #e4e6eb;
    font-size: 13px;
    text-align: center;
    cursor: default;
  }

  .meta {
    font-size: 11px;
    color: #5c6f80;
    padding: 4px 0;
  }

  .char-count {
    font-size: 11px;
    color: #5c6f80;
    text-align: right;
  }

  .char-count.warn { color: #e0a030; }
  .char-count.error { color: #e05050; }
</style>
</head>
<body>

<div class="header">
  <h1>PredictRu Bot Preview</h1>
  <span class="badge">Telegram HTML</span>
</div>

<div class="container">
  <div class="editor-panel">
    <label>–®–∞–±–ª–æ–Ω—ã</label>
    <div class="presets" id="presets"></div>

    <label>HTML-—Ä–∞–∑–º–µ—Ç–∫–∞</label>
    <textarea id="editor" spellcheck="false"></textarea>

    <label>Inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ (JSON, –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
    <textarea id="kb-editor" style="min-height:60px;max-height:100px" spellcheck="false">[]</textarea>

    <div class="char-count" id="char-count">0 —Å–∏–º–≤–æ–ª–æ–≤</div>
  </div>

  <div class="preview-panel">
    <label>–ü—Ä–µ–≤—å—é</label>
    <div class="chat-bg">
      <div class="message-bubble" id="preview"></div>
      <div id="kb-preview"></div>
      <div class="meta" id="meta">PredictRu Bot</div>
    </div>
  </div>
</div>

<script>
const PRESETS = {
  "welcome": {
    label: "üëã /start",
    html: `–ü—Ä–∏–≤–µ—Ç, <b>–ò–≤–∞–Ω</b>! üëã\n\nüîÆ <b>–ü—Ä–µ–¥—Å–∫–∞–∂–∏–†—É</b> ‚Äî –∏–≥—Ä–∞ –≤ –ø—Ä–æ–≥–Ω–æ–∑—ã\n\n–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:\nüëâ –ë–µ—Ä—ë—à—å –≤–æ–ø—Ä–æ—Å ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä,\n    <i>¬´–ë–∏—Ç–∫–æ–∏–Ω –¥–æ—Ä–æ–∂–µ $100K –∫ –∏—é–ª—é?¬ª</i>\nüëâ –°—Ç–∞–≤–∏—à—å –Ω–∞ <b>–î–ê</b> –∏–ª–∏ <b>–ù–ï–¢</b>\nüëâ –£–≥–∞–¥–∞–ª ‚Äî –∑–∞–±–∏—Ä–∞–µ—à—å –º–æ–Ω–µ—Ç—ã!\n\nüéÅ –¢–µ–±–µ —É–∂–µ –Ω–∞—á–∏—Å–ª–µ–Ω–æ <b>1 000 PRC</b> –Ω–∞ —Å—Ç–∞—Ä—Ç–µ\n\nüëá –ù–∞–∂–º–∏ –∏ –ø–æ–ø—Ä–æ–±—É–π ‚Äî —ç—Ç–æ –±–µ—Å–ø–ª–∞—Ç–Ω–æ:`,
    kb: [["‚ñ∂Ô∏è –ù–∞—á–∞—Ç—å –∏–≥—Ä–∞—Ç—å"],["ü§î –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?","üåê –°–∞–π—Ç"]]
  },
  "how_it_works": {
    label: "ü§î –ö–∞–∫ –∏–≥—Ä–∞—Ç—å",
    html: `üîÆ <b>–ö–∞–∫ –∏–≥—Ä–∞—Ç—å –≤ –ü—Ä–µ–¥—Å–∫–∞–∂–∏–†—É</b>\n\n<b>1.</b> –í—ã–±–µ—Ä–∏ –≤–æ–ø—Ä–æ—Å –∏–∑ —Å–ø–∏—Å–∫–∞\n    <i>–ù–∞–ø—Ä–∏–º–µ—Ä: ¬´–¶–ë —Å–Ω–∏–∑–∏—Ç —Å—Ç–∞–≤–∫—É –≤ –∞–ø—Ä–µ–ª–µ?¬ª</i>\n\n<b>2.</b> –ü–æ—Å—Ç–∞–≤—å –º–æ–Ω–µ—Ç—ã –Ω–∞ <b>–î–ê</b> –∏–ª–∏ <b>–ù–ï–¢</b>\n    <i>–ß–µ–º –º–µ–Ω—å—à–µ –ª—é–¥–µ–π —Å–æ–≥–ª–∞—Å–Ω—ã —Å —Ç–æ–±–æ–π ‚Äî\n    —Ç–µ–º –±–æ–ª—å—à–µ —Ç—ã –∑–∞—Ä–∞–±–æ—Ç–∞–µ—à—å</i>\n\n<b>3.</b> –ñ–¥–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç\n    <i>–ö–æ–≥–¥–∞ —Å–æ–±—ã—Ç–∏–µ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç (–∏–ª–∏ –Ω–µ—Ç) ‚Äî\n    –º–æ–Ω–µ—Ç—ã –Ω–∞—á–∏—Å–ª—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</i>\n\nü™ô <b>PRC</b> ‚Äî —ç—Ç–æ –∏–≥—Ä–æ–≤—ã–µ –º–æ–Ω–µ—Ç—ã.\n–ö–∞–∂–¥—ã–π –ø–æ–ª—É—á–∞–µ—Ç <b>1 000 PRC</b> –Ω–∞ —Å—Ç–∞—Ä—Ç–µ.\n\nüí° <i>–°–æ–≤–µ—Ç: –Ω–∞—á–Ω–∏ —Å –º–∞–ª–µ–Ω—å–∫–∏—Ö —Å—Ç–∞–≤–æ–∫,\n–ø–æ–∫–∞ —Ä–∞–∑–±–µ—Ä—ë—à—å—Å—è!</i>`,
    kb: [["‚ñ∂Ô∏è –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å"]]
  },
  "login_success": {
    label: "‚úÖ –õ–æ–≥–∏–Ω",
    html: `‚úÖ <b>–í—ã –≤–æ—à–ª–∏!</b>\n\n–í–µ—Ä–Ω–∏—Ç–µ—Å—å –Ω–∞ –≤–∫–ª–∞–¥–∫—É –±—Ä–∞—É–∑–µ—Ä–∞ ‚Äî\n–≤—Ö–æ–¥ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.`,
    kb: []
  },
  "login_used": {
    label: "‚ö†Ô∏è –°—Å—ã–ª–∫–∞",
    html: `‚ö†Ô∏è –≠—Ç–∞ —Å—Å—ã–ª–∫–∞ —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞.\n\n–û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç –∑–∞–Ω–æ–≤–æ –∏ –Ω–∞–∂–º–∏—Ç–µ ¬´–í–æ–π—Ç–∏¬ª.`,
    kb: []
  },
  "login_expired": {
    label: "‚è∞ –ò—Å—Ç–µ–∫–ª–∞",
    html: `‚è∞ –°—Å—ã–ª–∫–∞ —É—Å—Ç–∞—Ä–µ–ª–∞.\n\n–û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç –∑–∞–Ω–æ–≤–æ –∏ –Ω–∞–∂–º–∏—Ç–µ ¬´–í–æ–π—Ç–∏¬ª ‚Äî\n–≤—ã –ø–æ–ª—É—á–∏—Ç–µ –Ω–æ–≤—É—é —Å—Å—ã–ª–∫—É.`,
    kb: []
  },
  "profile": {
    label: "üë§ –ü—Ä–æ—Ñ–∏–ª—å",
    html: `üë§ <b>–¢–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å</b>\n\nü™ô –ù–∞ —Å—á–µ—Ç—É: <b>1,250 PRC</b>\nüìä –ü—Ä–æ–≥–Ω–æ–∑–æ–≤: <b>42</b>\nüî• –£–≥–∞–¥–∞–Ω–æ: <b>68%</b>\n\nüí° <i>–û—Ç–ª–∏—á–Ω–∞—è –∏–Ω—Ç—É–∏—Ü–∏—è!</i>`,
    kb: [["üìä –ú–æ–∏ –ø—Ä–æ–≥–Ω–æ–∑—ã"],["üîÆ –í—Å–µ –≤–æ–ø—Ä–æ—Å—ã"]]
  },
  "profile_new": {
    label: "‚≠ê –ù–æ–≤–∏—á–æ–∫",
    html: `üë§ <b>–¢–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å</b>\n\nü™ô –ù–∞ —Å—á–µ—Ç—É: <b>1,000 PRC</b>\n\nüí° <i>–°–¥–µ–ª–∞–π –ø–µ—Ä–≤—ã–π –ø—Ä–æ–≥–Ω–æ–∑!</i>`,
    kb: [["üìä –ú–æ–∏ –ø—Ä–æ–≥–Ω–æ–∑—ã"],["üîÆ –í—Å–µ –≤–æ–ø—Ä–æ—Å—ã"]]
  },
  "not_found": {
    label: "üëã –ù–µ –Ω–∞–π–¥–µ–Ω",
    html: `üëã –¢—ã –µ—â—ë –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω.\n\n–ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è!`,
    kb: [["üìä –ú–æ–∏ –ø—Ä–æ–≥–Ω–æ–∑—ã"],["üîÆ –í—Å–µ –≤–æ–ø—Ä–æ—Å—ã"]]
  },
  "resolution_win": {
    label: "üéâ –£–≥–∞–¥–∞–ª",
    html: `üéâ <b>–¢—ã —É–≥–∞–¥–∞–ª!</b>\n\n‚ùì ¬´–ë–∏—Ç–∫–æ–∏–Ω –¥–æ—Ä–æ–∂–µ $100K –∫ –∏—é–ª—é?¬ª\n‚úÖ –û—Ç–≤–µ—Ç: <b>–î–ê</b>\n\nüí∞ –¢–µ–±–µ –Ω–∞—á–∏—Å–ª–µ–Ω–æ: <b>+150 PRC</b>\n\nüî• –û—Ç–ª–∏—á–Ω–∞—è –∏–Ω—Ç—É–∏—Ü–∏—è!`,
    kb: [["üîÆ –ù–æ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã"],["‚ùå –ó–∞–∫—Ä—ã—Ç—å"]]
  },
  "resolution_lose": {
    label: "üìã –ù–µ —É–≥–∞–¥–∞–ª",
    html: `üìã <b>–†–µ–∑—É–ª—å—Ç–∞—Ç –≤–æ–ø—Ä–æ—Å–∞</b>\n\n‚ùì ¬´–ë–∏—Ç–∫–æ–∏–Ω –¥–æ—Ä–æ–∂–µ $100K –∫ –∏—é–ª—é?¬ª\n‚úÖ –û—Ç–≤–µ—Ç: <b>–î–ê</b>\n\n–¢–≤–æ—è —Å—Ç–∞–≤–∫–∞ –Ω–µ —Å—ã–≥—Ä–∞–ª–∞.\n–ù–æ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ –µ—â—ë –º–Ω–æ–≥–æ –≤–æ–ø—Ä–æ—Å–æ–≤ üëá`,
    kb: [["üîÆ –ù–æ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã"],["‚ùå –ó–∞–∫—Ä—ã—Ç—å"]]
  },
  "trade_confirm": {
    label: "‚úÖ –ü—Ä–æ–≥–Ω–æ–∑",
    html: `‚úÖ <b>–ü—Ä–æ–≥–Ω–æ–∑ –ø—Ä–∏–Ω—è—Ç!</b>\n\n‚ùì –ë–∏—Ç–∫–æ–∏–Ω –¥–æ—Ä–æ–∂–µ $100K –∫ –∏—é–ª—é?\nüéØ –¢—ã –ø–æ—Å—Ç–∞–≤–∏–ª –Ω–∞: <b>–î–ê</b>\nüí≥ –°—Ç–∞–≤–∫–∞: <b>7 PRC</b>\n\n–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—è–≤–∏—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –≤–æ–ø—Ä–æ—Å–∞.\n–£–¥–∞—á–∏! üçÄ`,
    kb: []
  },
  "daily_digest": {
    label: "‚òÄÔ∏è –î–∞–π–¥–∂–µ—Å—Ç",
    html: `‚òÄÔ∏è <b>–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ!</b>\n\n–í–æ—Ç —á—Ç–æ –æ–±—Å—É–∂–¥–∞—é—Ç –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å:\n\n1Ô∏è‚É£ –ö—É—Ä—Å —Ä—É–±–ª—è –Ω–∏–∂–µ 100 –∫ –∏—é–ª—é?\n     ‚Üí <b>65%</b> –¥—É–º–∞—é—Ç —á—Ç–æ –î–ê\n\n2Ô∏è‚É£ SpaceX –∑–∞–ø—É—Å—Ç–∏—Ç Starship –≤ –º–∞—Ä—Ç–µ?\n     ‚Üí <b>72%</b> –¥—É–º–∞—é—Ç —á—Ç–æ –î–ê\n\n3Ô∏è‚É£ –¶–ë —Å–Ω–∏–∑–∏—Ç —Å—Ç–∞–≤–∫—É –≤ –∞–ø—Ä–µ–ª–µ?\n     ‚Üí <b>18%</b> –¥—É–º–∞—é—Ç —á—Ç–æ –î–ê\n\n–°–æ–≥–ª–∞—Å–µ–Ω? –ü–æ—Å—Ç–∞–≤—å —Å–≤–æ–π –ø—Ä–æ–≥–Ω–æ–∑ üëá`,
    kb: [["‚ñ∂Ô∏è –°–¥–µ–ª–∞—Ç—å –ø—Ä–æ–≥–Ω–æ–∑"]]
  },
  "unavailable": {
    label: "‚ö†Ô∏è –û—à–∏–±–∫–∞",
    html: `‚ö†Ô∏è –°–µ—Ä–≤–∏—Å –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.\n–ü–æ–ø—Ä–æ–±—É–π —á–µ—Ä–µ–∑ –ø–∞—Ä—É –º–∏–Ω—É—Ç.`,
    kb: []
  }
};

const editor = document.getElementById('editor');
const kbEditor = document.getElementById('kb-editor');
const preview = document.getElementById('preview');
const kbPreview = document.getElementById('kb-preview');
const charCount = document.getElementById('char-count');
const presetsDiv = document.getElementById('presets');

let activePreset = null;
Object.entries(PRESETS).forEach(([key, p]) => {
  const btn = document.createElement('button');
  btn.className = 'preset-btn';
  btn.textContent = p.label;
  btn.onclick = () => {
    document.querySelectorAll('.preset-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    activePreset = key;
    editor.value = p.html;
    kbEditor.value = JSON.stringify(p.kb, null, 2);
    render();
  };
  presetsDiv.appendChild(btn);
});

function render() {
  const raw = editor.value;
  preview.innerHTML = raw.replace(/\n/g, '<br>');

  const plain = raw.replace(/<[^>]+>/g, '').length;
  charCount.textContent = `${plain} —Å–∏–º–≤–æ–ª–æ–≤`;
  charCount.className = 'char-count' + (plain > 4096 ? ' error' : plain > 3500 ? ' warn' : '');

  try {
    const kb = JSON.parse(kbEditor.value);
    kbPreview.innerHTML = '';
    if (Array.isArray(kb)) {
      kb.forEach(row => {
        const rowDiv = document.createElement('div');
        rowDiv.className = 'keyboard-row';
        const buttons = Array.isArray(row) ? row : [row];
        buttons.forEach(label => {
          const btn = document.createElement('div');
          btn.className = 'kb-button';
          btn.textContent = typeof label === 'string' ? label : label.text || '';
          rowDiv.appendChild(btn);
        });
        kbPreview.appendChild(rowDiv);
      });
    }
  } catch {
    // ignore invalid JSON
  }
}

editor.addEventListener('input', render);
kbEditor.addEventListener('input', render);

document.querySelector('.preset-btn').click();
</script>

</body>
</html>
